function initialize(){setMap(),setWelcomeScreen()}function setWelcomeScreen(){d3.select("body").style("background-image","url(http://i.imgur.com/PKscn22.jpg?1)").style("background-size","100% auto"),d3.select("body").append("div").attr("id","welcomeInfo").text("In the past century advances in human technology coupled with climatic change has made the formidable arctic accessible!")}function setMap(){function e(e,t,a){var a=(l.selectAll(".landMasses").data(topojson.feature(t,t.objects.landOutline).features).enter().append("g").attr("class","landMasses").append("path").attr("class","landBody").attr("d",i),l.selectAll(".lines").data(topojson.feature(a,a.objects.Test_Lines).features).enter().append("g").attr("class","lines").append("path").attr("class",function(e){return e.properties.Year}).attr("d",i).on("click",function(e){console.log(e.properties.Descrip)}).on("mouseover",function(){console.log("over")}));makeTimeline(n),updateLines()}var t=700,a=700,n=d3.select("body").append("div").attr("class","timelineBox").style("display","none"),r=d3.select("body").append("div").attr("class","infoPanelBox").style("display","none");makeInfoPanel(r);var s=d3.select("body").append("div").attr("class","mapContainer").style("display","none");s.append("text").attr("class","displayYear").text(currentYear);var l=d3.select(".mapContainer").append("svg").attr("class","map").attr("width",t).attr("height",a),o=d3.geo.orthographic().scale(500).rotate([0,-90,0]).translate([t/2,a/2]).clipAngle(90).precision(.1),i=d3.geo.path().projection(o),c=d3.geo.graticule();l.append("defs").append("path").datum({type:"Sphere"}).attr("id","sphere").attr("d",i),l.append("use").attr("class","sphereFill").attr("xlink:href","#sphere"),l.append("use").attr("class","sphereStroke").attr("xlink:href","#sphere"),l.append("path").datum(c).attr("class","graticule").attr("d",i),queue().defer(d3.json,"data/landOutline.topojson").defer(d3.json,"data/Test_Lines.topojson").await(e)}function updateYear(){var e=d3.select(".displayYear");e.text(currentYear)}function updateLines(){d3.selectAll(".lines").style("stroke",function(e){if(e.properties.Year!=currentYear)return"none";switch(e.properties.Country){case"Canada":return"yellow";case"Russia":return"red";case"Norway":return"blue";case"Denmark":return"black";case"United States":return"green";case"Norway, Russia":return"purple";case"USSR":return"red";default:return"turquois"}})}function makeTimeline(e){{var t=d3.scale.linear().domain([1903,2014]).range([0,950]),a=d3.svg.axis().scale(t).tickValues([1903,2014]).tickFormat(d3.format("d")).orient("bottom");e.append("svg").attr("width",980).attr("height",100).append("g").attr("transform","translate(15, 20)").attr("class","axis").call(a).selectAll("text").attr("y",0).attr("x",10).attr("dy",".35em").attr("transform","rotate(90)").style("text-anchor","start")}console.log("Yerp")}function makeInfoPanel(){console.log("hyup")}function changeVisibility(){d3.select(".timelineBox").transition().duration(1e3).style("display","block"),d3.select(".infoPanelBox").style("display","block"),d3.select(".mapContainer").style("display","block"),d3.select("#welcomeInfo").style("display","none")}var currentYear=1906;window.onload=initialize();