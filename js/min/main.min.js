function initialize(){setMap(),setIntroBox()}function setMap(){function t(t,e,a){var a=(o.selectAll(".landMasses").data(topojson.feature(e,e.objects.landOutline).features).enter().append("g").attr("class","landMasses").append("path").attr("class","landBody").attr("d",l),o.selectAll(".lines").data(topojson.feature(a,a.objects.Test_Lines).features).enter().append("g").attr("class","lines").append("path").attr("class",function(t){return t.properties.Year}).attr("d",l).on("click",function(t){console.log(t.properties.Descrip)}).on("mouseover",function(){console.log("over")}));makeTimeline(r),updateLines()}var e=700,a=700,r=d3.select("body").append("div").attr("class","timelineBox"),n=d3.select("body").append("div").attr("class","infoPanelBox");makeInfoPanel(n);var s=d3.select("body").append("div").attr("class","mapContainer");s.append("text").attr("class","displayYear").text(currentYear);var o=d3.select(".mapContainer").append("svg").attr("class","map").attr("width",e).attr("height",a),i=d3.geo.orthographic().scale(500).rotate([0,-90,0]).translate([e/2,a/2]).clipAngle(90).precision(.1),l=d3.geo.path().projection(i),p=d3.geo.graticule();o.append("defs").append("path").datum({type:"Sphere"}).attr("id","sphere").attr("d",l),o.append("use").attr("class","sphereFill").attr("xlink:href","#sphere"),o.append("use").attr("class","sphereStroke").attr("xlink:href","#sphere"),o.append("path").datum(p).attr("class","graticule").attr("d",l),queue().defer(d3.json,"data/landOutline.topojson").defer(d3.json,"data/Test_Lines.topojson").await(t)}function updateYear(){var t=d3.select(".displayYear");t.text(currentYear)}function updateLines(){d3.selectAll(".lines").style("stroke",function(t){if(t.properties.Year!=currentYear)return"none";switch(t.properties.Country){case"Canada":return"yellow";case"Russia":return"red";case"Norway":return"blue";case"Denmark":return"black";case"United States":return"green";case"Norway, Russia":return"purple";case"USSR":return"red";default:return"turquois"}})}function makeTimeline(t){{var e=d3.scale.linear().domain([1903,2014]).range([0,950]),a=d3.svg.axis().scale(e).tickValues([1903,2014]).tickFormat(d3.format("d")).orient("bottom");t.append("svg").attr("width",980).attr("height",100).append("g").attr("transform","translate(15, 20)").attr("class","axis").call(a).selectAll("text").attr("y",0).attr("x",10).attr("dy",".35em").attr("transform","rotate(90)").style("text-anchor","start")}console.log("Yerp")}function makeInfoPanel(){console.log("hyup")}function setIntroBox(){p=1;var t=d3.select("body").append("div").attr("class","introContainer").style("z-index",p);t.append("text").attr("class","introTitle").text("A short introduction to ocean claims").append("hr"),t.append("button").attr("class","SkipButton").attr("onclick","hide(p)").html("Skip Intro")}function hide(){p=-1,d3.select(".introContainer").style("z-index",p)}var currentYear=1906;window.onload=initialize();